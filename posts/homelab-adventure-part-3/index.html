<!DOCTYPE html>
<html lang="en">
    <head>
        <meta content="IE=edge" http-equiv="X-UA-Compatible"/>
        <meta content="text/html; charset=utf-8" http-equiv="content-type"/>
        <meta content="width=device-width, initial-scale=1.0, maximum-scale=5" name="viewport"/>
        <meta name="theme-color" content="#0d314b"/>
        <title>
            
    Homelab Adventure - Part 3: Internal Network - Doing Stuff

        </title>
        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://doingstuff.dev/apple-touch-icon-144-precomposed.png">
        <link href="https://doingstuff.dev/favicon.png" rel="icon" type="image/x-icon"/>
        <link rel="preload" href="https://doingstuff.dev/fonts/atkinson/AtkinsonHyperlegibleNext-VariableFont.ttf" as="font" type="font/ttf" crossorigin>
        <link rel="preload" href="https://doingstuff.dev/fonts/atkinson/AtkinsonHyperlegibleMono-VariableFont.ttf" as="font" type="font/ttf" crossorigin>
        
            <link rel="alternate" type= "application/atom+xml"  title="RSS" href="https://doingstuff.dev/atom.xml"/>
        
        
        
    <meta content="website" property="og:type"/>
    <meta content="Doing Stuff" property="og:site_name"/>
    <meta content="https://doingstuff.dev/posts/homelab-adventure-part-3/" property="og:url"/>
    <meta content="https://doingstuff.dev/posts/homelab-adventure-part-3/" property="twitter:url"/>
    
        <meta content="Homelab Adventure - Part 3: Internal Network" property="og:title"/>
        <meta content="Homelab Adventure - Part 3: Internal Network" property="twitter:title"/>
    
    
        <meta content="Homelab internal networking with ZeroTier" property="og:description"/>
        <meta content="Homelab internal networking with ZeroTier" property="description"/>
        <meta content="Homelab internal networking with ZeroTier" property="twitter:description"/>
    
    

        
        
            <link href="https://doingstuff.dev/fonts.css" rel="stylesheet" type="text/css"/>
            <link href="https://doingstuff.dev/doingstuff.css" rel="stylesheet" type="text/css"/>
            <link href="https://doingstuff.dev/print.css" rel="stylesheet" media="print" type="text/css"/>
        
        
        
    </head>
    <body>
        <!--Fix Firefox FOUC-->
        <script>0</script> 
        <div class="container">
            <nav class="topbar">
                <div class="topbar-text">
                    <div class="topbar-title">
                        <a href="/"><span>Doing Stuff</span></a>
                    </div>
                    <div class="topbar-menu">
                        
                        <a href="https://doingstuff.dev/posts"><span>Posts</span></a>
                        
                        <a href="https://doingstuff.dev/atom.xml"><span>RSS</span></a>
                        
                        <a href="https:&#x2F;&#x2F;creekmore.dev"><span>About</span></a>
                        
                    </div>
                </div>
            </nav>
            <div class="content">
                
<article>
    <header>
        <h1>Homelab Adventure - Part 3: Internal Network</h1>
        <div class="post-meta">
            Mar 29, 2023
            <br>
            
            
                <a class="badge badge-tag" href="https://doingstuff.dev/tags/linux/">Linux</a>
            
                <a class="badge badge-tag" href="https://doingstuff.dev/tags/homelab/">Homelab</a>
            
            <br>
            
        </div>
    </header>
    
    <div class="toc-wrapper">
        <input type="checkbox" id="tocToggle" checked>
        <label class="toc-label" for="tocToggle">â€º Table of Contents</label>
        <div class="toc">
            <ul>
                
                <li><a href="https://doingstuff.dev/posts/homelab-adventure-part-3/#why">Why?</a>
                    
                </li>
                
                <li><a href="https://doingstuff.dev/posts/homelab-adventure-part-3/#what-is-zerotier">What is ZeroTier</a>
                    
                </li>
                
                <li><a href="https://doingstuff.dev/posts/homelab-adventure-part-3/#alternatives">Alternatives</a>
                    
                </li>
                
                <li><a href="https://doingstuff.dev/posts/homelab-adventure-part-3/#zerotier-and-salt">ZeroTier and Salt</a>
                    
                </li>
                
            </ul>
        </div>
    </div>
    
    <div class="post"> 
        <p>Welcome to my journey in building my Homelab. This is part of a multipart series; in the last part I gave an overview of how to set up configuration management. This one will cover how I set up my internal network.</p>
<span id="continue-reading"></span>
<p><a href="https://doingstuff.dev/posts/homelab-adventure-part-1/"><strong>Part 1: The Adventure Begins</strong></a><br />
<a href="https://doingstuff.dev/posts/homelab-adventure-part-2/"><strong>Part 2: Configuration Management</strong></a><br />
<strong>Part 3: Internal Network (You are here!)</strong><br />
<a href="https://doingstuff.dev/posts/homelab-switching-salt-to-ansible/"><strong>Sidequest: Switching from Salt to Ansible</strong></a><br />
<a href="https://doingstuff.dev/posts/homelab-adventure-part-4/"><strong>Part 4: Application Hosting and Monitoring</strong></a></p>
<h2 id="why">Why?<a class="zola-anchor" href="#why" aria-label="Anchor link for: why">ðŸ”—</a></h2>
<p>It's helpful to have an internal and external network for your Homelab. This allows hosting of internal services without exposing them to the internet.</p>
<p>Since my Homelab lives in multiple datacenters (and at home), it's less convenient to use a site-to-site VPN. So a peer-to-peer VPN between all my servers is ideal. This also makes it easy for me to add non-servers to the network like my phone or desktop to access those internal services.</p>
<h2 id="what-is-zerotier">What is ZeroTier<a class="zola-anchor" href="#what-is-zerotier" aria-label="Anchor link for: what-is-zerotier">ðŸ”—</a></h2>
<blockquote>
<p><a href="https://www.zerotier.com/">ZeroTier</a> is a distributed network hypervisor built atop a cryptographically secure global peer to peer network. It provides advanced network virtualization and management capabilities on par with an enterprise SDN switch, but across both local and wide area networks and connecting almost any kind of app or device.</p>
</blockquote>
<p>This means ZeroTier is "mostly" a peer-to-peer VPN, what I mean by "mostly" is that it still uses a "centralized" network controller (you can host your own if you want). The bulk of the traffic is peer-to-peer, and the network controller is only for the initial routing. <a href="http://adamierymenko.com/decentralization.html">This has some trade-offs with something that is entirely peer-to-peer</a>.</p>
<h2 id="alternatives">Alternatives<a class="zola-anchor" href="#alternatives" aria-label="Anchor link for: alternatives">ðŸ”—</a></h2>
<p>These are some other options for peer-to-peer VPNs:</p>
<p><a href="https://www.tinc-vpn.org/">tinc</a> is one of the oldest peer-to-peer VPN's, but to set it up you have to share the generated public keys for each node with all the other nodes you want to connect.</p>
<p><a href="https://github.com/slackhq/nebula">Nebula</a> (inspired by tinc) has similar issues to tinc with certificate distribution. One advantage over tinc is that a discovery server is present in the Nebula network to ease node discovery.</p>
<p><a href="https://tailscale.com/">Tailscale</a> while a great alternative to ZeroTier, it didn't exist at the time I set up ZeroTier. <a href="https://tailscale.com/compare/zerotier/">This is a great comparison between Tailscale and ZeroTier</a>.</p>
<h2 id="zerotier-and-salt">ZeroTier and Salt<a class="zola-anchor" href="#zerotier-and-salt" aria-label="Anchor link for: zerotier-and-salt">ðŸ”—</a></h2>
<p>I have written a salt formula for managing ZeroTier with salt. It allows interacting with the local agent and the network controller's API.</p>
<p><a href="https://github.com/gamingrobot/salt-formula-zerotier">https://github.com/gamingrobot/salt-formula-zerotier</a></p>

    </div>
    
        <nav class="navigation">
            
                <a class="navigation-next" href="https:&#x2F;&#x2F;doingstuff.dev&#x2F;posts&#x2F;elf-shared-library-version&#x2F;">â€¹ Embedding Version Info into ELF Shared Libraries</a>
            
            
                <a class="navigation-prev" href="https:&#x2F;&#x2F;doingstuff.dev&#x2F;posts&#x2F;homelab-switching-salt-to-ansible&#x2F;">Homelab Sidequest - Switching from Salt to Ansible â€º</a>
            
        </nav>
    
</article>

                
                
                <div class="copyright">&copy; 2025 <a href="https:&#x2F;&#x2F;graphics.social&#x2F;@gamingrobot" rel="noopener me">Morgan Creekmore</a> - <a href=https://creativecommons.org/licenses/by/4.0>CC BY 4.0</a></div>
                
                
            </div>
        </div>
        
    
    

        
            <script data-goatcounter="https://grbt-doingstuff.goatcounter.com/count" async src="https://gc.zgo.at/count.js"></script>
        
    </body>
</html>
